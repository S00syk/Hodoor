{% extends 'attendance/base.html' %}
{% load static %}

{% block title %}Holidays Verification{% endblock %}
{% block aside %}

{% endblock %}
{% block content %}
<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
  <div class="modal-dialog" role="document">
    <div class="modal-content modal-primary">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">
            {% if check == 1 %}
                Holidays verified <i class="fa fa-check"></i><span class="modal-icon fa fa-plane pull-right"></span>
            {% elif check == 2 %}
                Holidays declined <i class="fa fa-times"></i><span class="modal-icon fa fa-plane pull-right"></span>
            {% else %}
                Holidays verification - {{holiday.profile.user.username}}<span class="modal-icon fa fa-plane pull-right"></span>
            {% endif %}   
        </h4>
      </div>
      <div class="modal-body">
                <table class="table table-primary-inverse">
                    <thead>
                    <tr class="upper">
                      <th class="col-md-3">Parameter</th>
                      <th class="col-md-3">Value</th>
                      <th class="col-md-3">Parameter</th> 
                      <th class="col-md-3">Value</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-field="key" class="key">First Name:</td>
                            <td data-field="value" id="swipeType">{{holiday.profile.user.first_name}}</td>
                            <td data-field="key" class="key">Last Name:</td>
                            <td data-field="value">{{holiday.profile.user.last_name}}</td>
                        </tr>
                        <tr>
                            <td data-field="key" class="key">Date since:</td>
                            <td>{{holiday.date_since}}</td>
                            <td data-field="key" class="key">Date to:</td>
                            <td>{{holiday.date_to}}</td>
                        </tr>
                        <tr>
                            <td data-field="key" class="key">Reason:</td>
                            <td>{{holiday.reason}}</td>
                            <td data-field="key" class="key">Hours on holiday:</td>
                            <td>{{days_on_holidays|floatformat:1}} days ({{hours_on_holidays|floatformat:0}} hours)</td>
                        </tr>
                        <tr>
                            <form method='POST' action=''>{% csrf_token %}
                            <td colspan="2">
                                <div class="col-md-6">
                                    <a class="btn btn-danger" href="{% url 'default_administrator'%}"><i class="fa fa-arrow-left"></i> Back to Admin page</a>
                                </div>
                            </td>
                            {% if check == 1 %}
                                <td colspan = "2"> <div class="badge badge-success"> Holidays have been successfuly verified <i class="fa fa-check"></i></div></td>
                            {% elif check == 2 %}
                                <td colspan = "2"> <div class="badge badge-success"> Holidays have been successfuly declined <i class="fa fa-check"></i></div></td>
                            {% else %}
                                <td>
                                    <div class="col-md-3">
                                        <button id="id_decline" name="decline" type='submit' class="btn btn-warning" value='Decline'>Decline</button>
                                    </div>
                                </td>
                                <td>
                                    <div class="col-md-3">
                                        <button id="id_verify" name="verify" type='submit' class="btn btn-primary" value='Verify'>Verify</button>
                                    </div>
                                </td>
                            {% endif %}
                        </tr>
                    </tbody>
                </table>
                {{form.errors}}
      </div><!--/modal body-->
    </div><!--/modal-->
  </div>
</div>

<script type="text/javascript">
    setTimeout(function(){ //set timeout for modal to be shown -like delay
        $('#myModal').modal('show');
      }, 1000);
</script>
{% endblock %}
